---
id: 20250810-0000.IbC3
title: Re-enable PostHog without navigation tracking
created: '2025-08-10'
updated: '2025-08-10'
spec: null
project: null
status: done
archived: false
---

## Objective
Restore PostHog analytics functionality in the app by vendoring the entire posthog-js-lite repository and removing deprecated react-navigation primitives.

## Requirements

**1. Fork and Vendor Setup**
- Fork PostHog/posthog-js-lite repository to your GitHub account
- Use git subtree to vendor the entire forked repository into `app/vendor/posthog-js-lite/`
- Remove `posthog-react-native: 4.2.2` from app/package.json dependencies

**2. Fix Deprecated Navigation Primitives**
- Remove navigation tracking entirely from the vendored version
- Replace navigation-related functionality in `posthog-react-native/src/hooks/useNavigationTracker.ts` with no-op implementations
- Keep the PostHogProvider but disable automatic screen tracking

**3. Integration**
- Update `app/src/sdk/posthog.ts` to use the vendored version instead of mock implementation
- Import from `../vendor/posthog-js-lite/posthog-react-native/src`
- Implement manual event tracking using existing AnalyticsEvents type
- Add PostHogProvider to the app component tree

**4. Testing**
- Add basic smoke tests to ensure PostHog initializes without errors
- Verify analytics events are captured correctly
- Test app functionality isn't broken by PostHog integration

## Git Subtree Instructions

1. Fork https://github.com/PostHog/posthog-js-lite to your GitHub account
2. Add the fork as a remote:
   ```bash
   git remote add posthog-fork https://github.com/YOUR_USERNAME/posthog-js-lite.git
   ```
3. Add as subtree:
   ```bash
   git subtree add --prefix=app/vendor/posthog-js-lite posthog-fork main --squash
   ```

## Success Criteria
- PostHog analytics working without navigation tracking
- No deprecated react-navigation API usage
- All existing app functionality preserved
- Basic smoke tests passing
- posthog-react-native removed from package.json