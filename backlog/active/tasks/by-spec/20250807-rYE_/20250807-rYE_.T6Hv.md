---
id: 20250807-rYE_.T6Hv
title: Complete SMS Authentication System Removal
created: '2025-08-09'
updated: '2025-08-09'
spec: 20250807-rYE_
project: auth
status: todo
archived: false
---

## Objective
Completely disable and remove the SMS authentication system as the final phase of the authentication migration, assuming all users have already migrated to alternative methods.

## Requirements

### Core Functionality
1. **Complete SMS Removal**: Remove all SMS authentication functionality without migration verification checks
2. **No Rollback**: Permanent removal with no rollback capability 
3. **Database Cleanup**: Leave SMS-related fields intact but unused
4. **Graceful Degradation**: Return 410 Gone status for removed SMS endpoints
5. **Comprehensive Scope**: Complete removal in a single task
6. **Dependency Cleanup**: Remove all SMS/Twilio dependencies immediately
7. **Clear Messaging**: Return specific "SMS authentication discontinued" messages

### Technical Implementation

**Backend (Clojure)**:
- Remove all SMS authentication endpoints (`/auth/sms/*`)
- Add 410 Gone responses for deprecated SMS endpoints with discontinuation message
- Remove Twilio integration code and configuration
- Remove SMS-related functions and utilities
- Keep database schema intact (don't modify user table fields)
- Update API documentation to remove SMS references

**Frontend (React Native/Expo)**:
- Remove SMS authentication UI components and screens
- Remove SMS-related navigation routes
- Update sign-in/sign-up flows to exclude SMS options
- Remove SMS-related form validations and state management
- Update error handling to remove SMS-specific cases

**Dependencies & Configuration**:
- Remove Twilio SDK dependencies from package.json/deps.edn
- Remove SMS/Twilio configuration variables
- Clean up environment variable references
- Remove SMS-related secrets and configuration

**Testing & Documentation**:
- Remove SMS-related test files and test cases
- Update integration tests to exclude SMS flows
- Update API documentation to reflect SMS removal
- Add tests for 410 responses on deprecated endpoints

### Error Handling
- SMS endpoint requests return: `410 Gone - "SMS authentication has been discontinued. Please use Apple, Google, or email authentication."`
- Remove SMS options from all authentication flows
- No migration prompts or redirects needed

### Database Schema
- **No Changes**: Leave existing SMS-related fields (phone_number, auth_method) intact but unused
- These fields may contain historical data for reference

## Acceptance Criteria
- [ ] All SMS authentication endpoints removed or return 410 Gone
- [ ] SMS UI components completely removed from frontend
- [ ] Twilio dependencies and configuration removed
- [ ] SMS-related tests removed and updated
- [ ] Clear "SMS discontinued" error messages for deprecated endpoints
- [ ] No SMS options visible in authentication flows
- [ ] Database fields remain intact but unused
- [ ] API documentation updated to reflect changes
- [ ] Application functions normally with Apple/Google/email auth only