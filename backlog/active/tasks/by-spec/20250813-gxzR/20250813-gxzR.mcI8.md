---
id: 20250813-gxzR.mcI8
title: Enhance reply icon with scale, color, and alpha animations
created: '2025-08-13'
updated: '2025-08-13'
spec: 20250813-gxzR
project: ui-polish
status: done
archived: false
---

# Task: Enhance reply icon with scale, color, and alpha animations

**Spec Reference**: 20250813-gxzR - Signal-Style Swipe-to-Reply Animation Enhancement

## Objective
Enhance the existing reply icon animation to match Signal's polished visual feedback with proper scaling, color transitions, and smooth alpha progression.

## Implementation Details

### File to Modify
`app/src/gifted/Message/index.tsx` - `AnimatedMessageInnerRowInChat` component (lines 1118-1291)

### Changes Required

1. **Add Animation Constants**
   ```typescript
   const ICON_SCALE_ACTIVE = 1.16;
   ```

2. **Enhance Icon Animation Styles** (lines 1151-1160)
   - Current: Basic opacity animation
   - New: Scale, color, and progressive alpha
   ```typescript
   const replyIconContainerStyle = useAnimatedStyle(() => {
     const progress = translateX.value / TRANSLATE_X_THRESHOLD;
     const clampedProgress = Math.min(Math.max(progress, 0), 1);
     
     // Progressive alpha based on swipe progress
     const opacity = clampedProgress;
     
     // Scale animation when threshold crossed
     const scale = translateX.value >= TRANSLATE_X_THRESHOLD ? ICON_SCALE_ACTIVE : 1;
     
     return { 
       opacity,
       transform: [{ scale }]
     };
   });
   ```

3. **Add Color State Animation**
   - Create animated color transition
   - Inactive: colors.strongGrey
   - Active: colors.textPrimary (or appropriate Gatz theme color)
   ```typescript
   const iconColor = useAnimatedStyle(() => {
     const isActive = translateX.value >= TRANSLATE_X_THRESHOLD;
     return {
       tintColor: isActive ? colors.textPrimary : colors.strongGrey
     };
   });
   ```

4. **Update Icon Positioning**
   - Ensure 8pt offset from message left edge
   - Maintain vertical centering
   - Current positioning at lines 1275-1288 should be adjusted if needed

5. **Integration with Spring Animation**
   - Scale animation should use same spring config as gesture
   - Smooth transitions when threshold is crossed
   - Reset properly on gesture end

## Testing Requirements
- Update existing icon animation tests
- Verify scale animation triggers at correct threshold
- Test color transition works with Gatz theme system

## Success Criteria
- [ ] Icon scales to 1.16x when threshold crossed
- [ ] Smooth color transition from strongGrey to textPrimary
- [ ] Progressive alpha fade-in based on swipe progress
- [ ] Icon positioned with proper 8pt offset
- [ ] Animation resets smoothly on gesture end
- [ ] Works with existing Gatz color theme